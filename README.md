ЁЯФе Fast (ржжрзНрж░рзБржд)

Express ржЦрзБржм ржжрзНрж░рзБржд ржХрж╛ржЬ ржХрж░рзЗред
ржХрж╛рж░ржгтАФ

ржХржо ржХрзЛржб

рж╣рж╛рж▓ржХрж╛

ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯ ржЬрж┐ржирж┐рж╕ ржирзЗржЗ

ржорж╛ржирзЗ рж╕рж╛рж░рзНржнрж╛рж░ ржЦрзБржм ржжрзНрж░рзБржд requestтАУresponse рж╣рзНржпрж╛ржирзНржбрзЗрж▓ ржХрж░рждрзЗ ржкрж╛рж░рзЗред

ЁЯОп Unopinionated (ржирж┐ржЬрзЗрж░ ржирж┐рзЯржо ржЪрж╛ржкрж┐рзЯрзЗ ржжрзЗрзЯ ржирж╛)

ржПржЯрж╛ рж╕ржмржЪрзЗрзЯрзЗ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг рж╢ржмрзНржжред

Unopinionated ржорж╛ржирзЗ:
Express рждрзЛржорж╛ржХрзЗ ржмрж▓рзЗ ржирж╛тАФ
тАЬController ржПржоржи рж╣ржмрзЗтАЭ,
тАЬFolder structure ржПржоржи рж╣рждрзЗ рж╣ржмрзЗтАЭ,
тАЬRouting ржПржнрж╛ржмрзЗ ржХрж░рждрзЗ рж╣ржмрзЗтАЭ,
тАЬModel ржПржнрж╛ржмрзЗ ржмрж╛ржирж╛рждрзЗ рж╣ржмрзЗредтАЭ

Express flexibleред
рждрзБржорж┐ ржпрзЗржнрж╛ржмрзЗ ржЪрж╛ржЗржмрзЗ рж╕рзЗржнрж╛ржмрзЗ project structure ржмрж╛ржирж╛рждрзЗ ржкрж╛рж░рзЛред

ЁЯФН Minimalist (ржЦрзБржмржЗ ржорж┐ржирж┐ржорж╛рж▓ / ржЫрзЛржЯ ржХрзЛржбржмрзЗрж╕)

Express-ржПрж░ core ржЦрзБржм ржЫрзЛржЯред
ржирж┐ржЬрзЗ ржЦрзБржм ржХржо ржХрж╛ржЬ ржХрж░рзЗред

ржпрзЗ ржХрж╛ржЬржЧрзБрж▓рзЛ ржжрж░ржХрж╛рж░ рж╣рзЯ,
ржпрзЗржоржитАФ

body parser

cookie parser

JWT

validation

file upload

рж╕ржмржЧрзБрж▓рзЛ ржЖрж▓рж╛ржжрж╛ package ржжрж┐рзЯрзЗ рждрзБржорж┐ add ржХрж░рждрзЗ ржкрж╛рж░рзЛред

ржЕрж░рзНржерж╛рзО Express ржЦрзБржмржЗ ржЫрж┐ржоржЫрж╛ржо (minimal)ред

ржЖрж░рзЗржХржЯрзБ рж╕рж╣ржЬ ржнрж╛рж╖рж╛рзЯ:

Express рж╣рж▓рзЛ
тАЬржПржХржЯрж╛ ржЦрж╛рж▓рж┐ ржмрж╛рзЬрж┐тАЭ
рждрзБржорж┐ ржпрзЗржнрж╛ржмрзЗ рж╕рж╛ржЬрж╛ржмрзЗ, рж╕рзЗржнрж╛ржмрзЗржЗ рж╣ржмрзЗред

Django ржмрж╛ Laravel ржПрж░ ржорждрзЛ
тАЬржПржнрж╛ржмрзЗ ржХрж░рждрзЗржЗ рж╣ржмрзЗтАЭтАФ
ржПржоржи strict framework ржирж╛ред

## тнР ржХрзЗржи npm init (package.json) ржжрж░ржХрж╛рж░?

Node.js ржкрзНрж░ржЬрзЗржХрзНржЯ ржарж┐ржХржнрж╛ржмрзЗ ржЪрж╛рж▓рж╛рждрзЗ ржПржмржВ manage ржХрж░рждрзЗ package.json ржЦрзБржмржЗ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржгред
ржПржЗ package.json ржмрж╛ржирж╛ржирзЛрж░ ржЬржирзНржпржЗ ржЖржорж░рж╛ npm init ржХрж░рж┐ред

тЬЕ 1. ржкрзНрж░ржЬрзЗржХрзНржЯрзЗрж░ ржкрж░рж┐ржЪрзЯржкрждрзНрж░ (ID card)

package.json рж╣рж▓рзЛ рждрзЛржорж╛рж░ Node.js ржкрзНрж░ржЬрзЗржХрзНржЯрзЗрж░ ID cardред

ржПрждрзЗ ржерж╛ржХрзЗ:

project name

version

description

entry file

author

license

ржПржЧрзБрж▓рзЛ ржЫрж╛рзЬрж╛ ржкрзНрж░ржЬрзЗржХрзНржЯ ржЕрж╕ржорзНржкрзВрж░рзНржгред

тЬЕ 2. Dependency ржЧрзБрж▓рзЛ ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рждрзЗ

рждрзБржорж┐ express, mongoose, cors, nodemonтАФ ржпрзЗржХрзЛржирзЛ package install ржХрж░рж▓рзЗ рж╕рзЗржЯрж╛ package.json ржП save рж╣рзЯред

ржЙржжрж╛рж╣рж░ржг:

npm install express

package.json тЖТ

{
"dependencies": {
"express": "^5.1.0"
}
}

ржПржЯрж╛ ржирж╛ ржерж╛ржХрж▓рзЗ future ржП project run ржХрж░рж╛ржЗ ржпрж╛ржмрзЗ ржирж╛ред

тЬЕ 3. ржЕржирзНржп ржХрзЗржЙ project ржирж┐рждрзЗ ржкрж╛рж░ржмрзЗ

ржпрзЗ ржХрзЗржЙ рж╢рзБржзрзБ рж▓рж┐ржЦржмрзЗ:

npm install

ЁЯСЙ рж╕ржм dependency automatically install рж╣рзЯрзЗ ржпрж╛ржмрзЗред

package.json ржирж╛ ржерж╛ржХрж▓рзЗ
тЭМ ржХрзЗржЙ рждрзЛржорж╛рж░ ржкрзНрж░ржЬрзЗржХрзНржЯ run ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ ржирж╛ред

тЬЕ 4. Scripts рждрзИрж░рж┐ ржХрж░рждрзЗ

рждрзБржорж┐ command рждрзИрж░рж┐ ржХрж░рждрзЗ ржкрж╛рж░рзЛ:

{
"scripts": {
"start": "node index.js",
"dev": "nodemon index.js"
}
}

ржПржЦржи рж╕рж╣ржЬрзЗ run:

npm run dev

package.json ржЫрж╛рзЬрж╛ ржПржЧрзБрж▓рзЛ рж╕ржорзНржнржм ржирж╛ред

тЬЕ 5. Node.js ржкрзНрж░ржЬрзЗржХрзНржЯ рж╣рж┐рж╕рзЗржмрзЗ ржШрзЛрж╖ржгрж╛

ржпржЦржи рждрзБржорж┐ folder ржП package.json рж░рж╛ржЦрзЛ тЖТ Node ржмрзБржЭрзЗ ржпрзЗ ржПржЯрж╛ ржПржХржЯрж┐ proper ржкрзНрж░ржЬрзЗржХрзНржЯред

package.json ржирж╛ ржерж╛ржХрж▓рзЗ:

dependency save рж╣ржмрзЗ ржирж╛

рж╕рзНржХрзНрж░рж┐ржкрзНржЯ ржХрж╛ржЬ ржХрж░ржмрзЗ ржирж╛

app shared ржХрж░рж╛ ржпрж╛ржмрзЗ ржирж╛

npm tools ржХрж╛ржЬ ржХрж░ржмрзЗ ржирж╛

ЁЯУМ ржмрж╛ржВрж▓рж╛рзЯ ржПржХ рж▓рж╛ржЗржирзЗ:

package.json рж╣рж▓рзЛ Node.js ржкрзНрж░ржЬрзЗржХрзНржЯрзЗрж░ рж╣рж╛рж░рзНржЯ тАФ dependency, version, scripts, рж╕ржмржХрж┐ржЫрзБ ржПржЯрж╛рждрзЗ ржерж╛ржХрзЗред
ржПржЗ ржлрж╛ржЗрж▓ ржмрж╛ржирж╛ржирзЛрж░ ржЬржирзНржпржЗ npm init ржкрзНрж░рзЯрзЛржЬржиред

# why use -D flag

TypeScript рж╢рзБржзрзБ development-ржПрж░ рж╕ржорзЯ рж▓рж╛ржЧрзЗ, production ржП рж▓рж╛ржЧрзЗ ржирж╛тАФ рждрж╛ржЗ -D ржжрж┐рзЯрзЗ devDependency рж╣рж┐рж╕рзЗржмрзЗ ржЗржирж╕рзНржЯрж▓ ржХрж░рж╛ рж╣рзЯред

# express.json()

express.json() рж╣рж▓рзЛ Express.js ржПрж░ ржПржХржЯрж╛ built-in middleware ржпрж╛ HTTP рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯрзЗрж░ JSON ржлрж░ржорзНржпрж╛ржЯрзЗрж░ ржмржбрж┐ (body) ржХрзЗ ржкрж╛рж░рзНрж╕ ржХрж░рзЗ ржПржмржВ рж╕рзЗржЯрж╛ржХрзЗ req.body ржПрж░ ржоржзрзНржпрзЗ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ ржХрж░рж╛рж░ ржпрзЛржЧрзНржп ржХрж░рзЗ рждрзЛрж▓рзЗред

рж╕рж╣ржЬ ржмрж╛ржВрж▓рж╛рзЯ:

ржпржЦржи рждрзЛржорж╛рж░ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ (ржпрзЗржоржи ржмрзНрж░рж╛ржЙржЬрж╛рж░ ржмрж╛ Postman) ржерзЗржХрзЗ рж╕рж╛рж░рзНржнрж╛рж░рзЗ JSON ржбрж╛ржЯрж╛ ржкрж╛ржарж╛ржирзЛ рж╣рзЯ (рж╕рж╛ржзрж╛рж░ржгржд POST, PUT ржмрж╛ PATCH рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯрзЗ), рждржЦржи рж╕рзЗржЯрж╛ ржЖрж╕рж▓рзЗ string ржЖржХрж╛рж░рзЗ ржерж╛ржХрзЗред

express.json() рж╕рзЗржЗ string ржХрзЗ JavaScript object ржП рж░рзВржкрж╛ржирзНрждрж░ ржХрж░рзЗ ржжрзЗрзЯ ржпрж╛рждрзЗ рждрзЛржорж╛рж░ ржХрзЛржбрзЗ рж╕рж╣ржЬрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЛред

ржХрзЗржи ржжрж░ржХрж╛рж░?

HTTP рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯрзЗрж░ ржмржбрж┐ ржЖрж╕рж▓рзЗ text/string рж╣рж┐рж╕рзЗржмрзЗ ржЖрж╕рзЗ

ржХрж┐ржирзНрждрзБ рждрзБржорж┐ ржЪрж╛ржЗрж▓рзЗ ржмржбрж┐рж░ ржоржзрзНржпрзЗ ржерж╛ржХрж╛ JSON ржбрж╛ржЯрж╛ржХрзЗ object рж╣рж┐рж╕рзЗржмрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗ

рждрж╛ржЗ express.json() middleware ржЯрж╛ рждрзЛржорж╛рж░ ржПржЗ ржХрж╛ржЬржЯрж╛ ржХрж░рзЗ ржжрзЗрзЯ рж╕рзНржмрзЯржВржХрзНрж░рж┐рзЯржнрж╛ржмрзЗ

# database pool

Database Pool ржмрж╛ Connection Pool ржХрзА?

ржбрж╛ржЯрж╛ржмрзЗрж╕ ржкрзБрж▓ рж╣рж▓рзЛ ржПржХржЯрж┐ ржХрзНрж▓рж╛рж╕ ржмрж╛ рж╕рж╛рж░рзНржнрж┐рж╕ ржпрж╛ ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзЛржЧ (connection) ржЧрзБрж▓рзЛ рждрзИрж░рж┐ ржХрж░рзЗ ржПржХржжржо ржЖржЧрзЗ ржерзЗржХрзЗржЗ ржкрзНрж░рж╕рзНрждрзБржд рж░рж╛ржЦрзЗред

ржПржЦржи ржпржЦржи рждрзЛржорж╛рж░ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗ ржХрзЛржирзЛ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржкрж╛ржарж╛ржмрзЗ, рждржЦржи ржбрж╛ржЯрж╛ржмрзЗрж╕ ржкрзБрж▓ ржерзЗржХрзЗ ржПржХржЯрж┐ ржЖржЧрзЗржЗ рждрзИрж░рж┐ ржХрж░рж╛ ржХрж╛ржирзЗржХрж╢ржи ржирзЗржУрзЯрж╛ рж╣рзЯ, ржХрж╛ржЬ рж╢рзЗрж╖ рж╣рж▓рзЗ рж╕рзЗржЯрж╛ ржЖржмрж╛рж░ ржкрзБрж▓рзЗ рж░рзЗржЦрзЗ ржжрзЗржУрзЯрж╛ рж╣рзЯред

ржХрзЗржи ржкрзНрж░рзЯрзЛржЬржи?

ржкрзНрж░рждрж┐ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯрзЗ ржирждрзБржи ржХрж╛ржирзЗржХрж╢ржи рждрзИрж░рж┐ ржХрж░рж▓рзЗ рж╕ржорзЯ ржПржмржВ рж░рж┐рж╕рзЛрж░рзНрж╕ ржмрзЗрж╢рж┐ рж▓рж╛ржЧрзЗред

ржбрж╛ржЯрж╛ржмрзЗрж╕ ржХрж╛ржирзЗржХрж╢ржи рждрзИрж░рж┐рждрзЗ ржХрж┐ржЫрзБ рж╕ржорзЯ рж▓рж╛ржЧрзЗ (ржпрж╛ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржиржХрзЗ ржзрзАрж░ ржХрж░рзЗ ржжрзЗрзЯ)ред

ржПржХрж╛ржзрж┐ржХ ржХрж╛ржирзЗржХрж╢ржи рждрзИрж░рж┐ ржХрж░рж▓рзЗ рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржЪрж╛ржк ржкрзЬрзЗ, ржХрж┐ржирзНрждрзБ ржПржХржЗ рж╕ржорзЯ ржЕржирзЗржХ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржерж╛ржХрзЗред

рждрж╛ржЗ ржкрзВрж░рзНржмрзЗржЗ ржХрж┐ржЫрзБ ржХрж╛ржирзЗржХрж╢ржи рждрзИрж░рж┐ рж░рзЗржЦрзЗ, ржмрж╛рж░ржмрж╛рж░ ржирждрзБржи ржХрж░рзЗ ржХрж╛ржирзЗржХрж╢ржи рждрзИрж░рж┐ ржирж╛ ржХрж░рзЗ, ржкрзВрж░рзНржмрзЗ рждрзИрж░рж┐ ржХрж╛ржирзЗржХрж╢ржи рж░рж┐ржЗржЙржЬ ржХрж░рж╛рж░ ржЬржирзНржп ржбрж╛ржЯрж╛ржмрзЗрж╕ ржкрзБрж▓ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯред

ржХрж┐ржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ?

ржкрзНрж░ржержорзЗ, ржбрж╛ржЯрж╛ржмрзЗрж╕ ржкрзБрж▓ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕ржВржЦрзНржпржХ ржХрж╛ржирзЗржХрж╢ржи рждрзИрж░рж┐ ржХрж░рзЗ рж░рж╛ржЦрзЗ (ржзрж░рж╛ ржпрж╛ржХ 10ржЯрж╛)ред

ржпржЦржи ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи ржерзЗржХрзЗ ржХрзЛржирзЛ ржбрж╛ржЯрж╛ржмрзЗрж╕ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржЖрж╕рзЗ, рждржЦржи ржкрзБрж▓ ржерзЗржХрзЗ ржПржХржЯрж┐ ржлрж╛ржБржХрж╛ ржХрж╛ржирзЗржХрж╢ржи ржирзЗрзЯрж╛ рж╣рзЯред

ржХрж╛ржЬ рж╢рзЗрж╖ рж╣рж▓рзЗ, ржУржЗ ржХрж╛ржирзЗржХрж╢ржи ржмржирзНржз ржирж╛ ржХрж░рзЗ ржкрзБрж▓рзЗ ржлрзЗрж░ржд ржжрзЗрзЯрж╛ рж╣рзЯред

ржкрж░ржмрж░рзНрждрзА рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯрзЗ ржЖржмрж╛рж░ ржПржХржЗ ржХрж╛ржирзЗржХрж╢ржи ржЗржЙржЬ ржХрж░рж╛ рж╣рзЯред

рж╕рзБржмрж┐ржзрж╛:

ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕ ржмрзГржжрзНржзрж┐: ржХрж╛ржирзЗржХрж╢ржи рждрзИрж░рж┐рж░ рж╕ржорзЯ ржХржорзЗ ржпрж╛рзЯред

рж░рж┐рж╕рзЛрж░рзНрж╕ ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛ ржнрж╛рж▓рзЛ рж╣рзЯ: ржПржХржЗ рж╕ржорзЯрзЗ рж╕рзАржорж┐ржд ржХрж╛ржирзЗржХрж╢ржи ржжрж┐рзЯрзЗ ржмрзЗрж╢рж┐ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ рж╕рж╛ржорж▓рж╛ржирзЛ ржпрж╛рзЯред

рж╕рзНржХрзЗрж▓рж┐ржВ рж╕рж╣ржЬ рж╣рзЯ: ржмрзЬ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи рж╕рж╣ржЬрзЗ ржорзНржпрж╛ржирзЗржЬ ржХрж░рж╛ ржпрж╛рзЯред
