ЁЯФе Fast (ржжрзНрж░рзБржд)

Express ржЦрзБржм ржжрзНрж░рзБржд ржХрж╛ржЬ ржХрж░рзЗред
ржХрж╛рж░ржгтАФ

ржХржо ржХрзЛржб

рж╣рж╛рж▓ржХрж╛

ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯ ржЬрж┐ржирж┐рж╕ ржирзЗржЗ

ржорж╛ржирзЗ рж╕рж╛рж░рзНржнрж╛рж░ ржЦрзБржм ржжрзНрж░рзБржд requestтАУresponse рж╣рзНржпрж╛ржирзНржбрзЗрж▓ ржХрж░рждрзЗ ржкрж╛рж░рзЗред

ЁЯОп Unopinionated (ржирж┐ржЬрзЗрж░ ржирж┐рзЯржо ржЪрж╛ржкрж┐рзЯрзЗ ржжрзЗрзЯ ржирж╛)

ржПржЯрж╛ рж╕ржмржЪрзЗрзЯрзЗ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг рж╢ржмрзНржжред

Unopinionated ржорж╛ржирзЗ:
Express рждрзЛржорж╛ржХрзЗ ржмрж▓рзЗ ржирж╛тАФ
тАЬController ржПржоржи рж╣ржмрзЗтАЭ,
тАЬFolder structure ржПржоржи рж╣рждрзЗ рж╣ржмрзЗтАЭ,
тАЬRouting ржПржнрж╛ржмрзЗ ржХрж░рждрзЗ рж╣ржмрзЗтАЭ,
тАЬModel ржПржнрж╛ржмрзЗ ржмрж╛ржирж╛рждрзЗ рж╣ржмрзЗредтАЭ

Express flexibleред
рждрзБржорж┐ ржпрзЗржнрж╛ржмрзЗ ржЪрж╛ржЗржмрзЗ рж╕рзЗржнрж╛ржмрзЗ project structure ржмрж╛ржирж╛рждрзЗ ржкрж╛рж░рзЛред

ЁЯФН Minimalist (ржЦрзБржмржЗ ржорж┐ржирж┐ржорж╛рж▓ / ржЫрзЛржЯ ржХрзЛржбржмрзЗрж╕)

Express-ржПрж░ core ржЦрзБржм ржЫрзЛржЯред
ржирж┐ржЬрзЗ ржЦрзБржм ржХржо ржХрж╛ржЬ ржХрж░рзЗред

ржпрзЗ ржХрж╛ржЬржЧрзБрж▓рзЛ ржжрж░ржХрж╛рж░ рж╣рзЯ,
ржпрзЗржоржитАФ

body parser

cookie parser

JWT

validation

file upload

рж╕ржмржЧрзБрж▓рзЛ ржЖрж▓рж╛ржжрж╛ package ржжрж┐рзЯрзЗ рждрзБржорж┐ add ржХрж░рждрзЗ ржкрж╛рж░рзЛред

ржЕрж░рзНржерж╛рзО Express ржЦрзБржмржЗ ржЫрж┐ржоржЫрж╛ржо (minimal)ред

ржЖрж░рзЗржХржЯрзБ рж╕рж╣ржЬ ржнрж╛рж╖рж╛рзЯ:

Express рж╣рж▓рзЛ
тАЬржПржХржЯрж╛ ржЦрж╛рж▓рж┐ ржмрж╛рзЬрж┐тАЭ
рждрзБржорж┐ ржпрзЗржнрж╛ржмрзЗ рж╕рж╛ржЬрж╛ржмрзЗ, рж╕рзЗржнрж╛ржмрзЗржЗ рж╣ржмрзЗред

Django ржмрж╛ Laravel ржПрж░ ржорждрзЛ
тАЬржПржнрж╛ржмрзЗ ржХрж░рждрзЗржЗ рж╣ржмрзЗтАЭтАФ
ржПржоржи strict framework ржирж╛ред

## тнР ржХрзЗржи npm init (package.json) ржжрж░ржХрж╛рж░?

Node.js ржкрзНрж░ржЬрзЗржХрзНржЯ ржарж┐ржХржнрж╛ржмрзЗ ржЪрж╛рж▓рж╛рждрзЗ ржПржмржВ manage ржХрж░рждрзЗ package.json ржЦрзБржмржЗ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржгред
ржПржЗ package.json ржмрж╛ржирж╛ржирзЛрж░ ржЬржирзНржпржЗ ржЖржорж░рж╛ npm init ржХрж░рж┐ред

тЬЕ 1. ржкрзНрж░ржЬрзЗржХрзНржЯрзЗрж░ ржкрж░рж┐ржЪрзЯржкрждрзНрж░ (ID card)

package.json рж╣рж▓рзЛ рждрзЛржорж╛рж░ Node.js ржкрзНрж░ржЬрзЗржХрзНржЯрзЗрж░ ID cardред

ржПрждрзЗ ржерж╛ржХрзЗ:

project name

version

description

entry file

author

license

ржПржЧрзБрж▓рзЛ ржЫрж╛рзЬрж╛ ржкрзНрж░ржЬрзЗржХрзНржЯ ржЕрж╕ржорзНржкрзВрж░рзНржгред

тЬЕ 2. Dependency ржЧрзБрж▓рзЛ ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рждрзЗ

рждрзБржорж┐ express, mongoose, cors, nodemonтАФ ржпрзЗржХрзЛржирзЛ package install ржХрж░рж▓рзЗ рж╕рзЗржЯрж╛ package.json ржП save рж╣рзЯред

ржЙржжрж╛рж╣рж░ржг:

npm install express

package.json тЖТ

{
"dependencies": {
"express": "^5.1.0"
}
}

ржПржЯрж╛ ржирж╛ ржерж╛ржХрж▓рзЗ future ржП project run ржХрж░рж╛ржЗ ржпрж╛ржмрзЗ ржирж╛ред

тЬЕ 3. ржЕржирзНржп ржХрзЗржЙ project ржирж┐рждрзЗ ржкрж╛рж░ржмрзЗ

ржпрзЗ ржХрзЗржЙ рж╢рзБржзрзБ рж▓рж┐ржЦржмрзЗ:

npm install

ЁЯСЙ рж╕ржм dependency automatically install рж╣рзЯрзЗ ржпрж╛ржмрзЗред

package.json ржирж╛ ржерж╛ржХрж▓рзЗ
тЭМ ржХрзЗржЙ рждрзЛржорж╛рж░ ржкрзНрж░ржЬрзЗржХрзНржЯ run ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ ржирж╛ред

тЬЕ 4. Scripts рждрзИрж░рж┐ ржХрж░рждрзЗ

рждрзБржорж┐ command рждрзИрж░рж┐ ржХрж░рждрзЗ ржкрж╛рж░рзЛ:

{
"scripts": {
"start": "node index.js",
"dev": "nodemon index.js"
}
}

ржПржЦржи рж╕рж╣ржЬрзЗ run:

npm run dev

package.json ржЫрж╛рзЬрж╛ ржПржЧрзБрж▓рзЛ рж╕ржорзНржнржм ржирж╛ред

тЬЕ 5. Node.js ржкрзНрж░ржЬрзЗржХрзНржЯ рж╣рж┐рж╕рзЗржмрзЗ ржШрзЛрж╖ржгрж╛

ржпржЦржи рждрзБржорж┐ folder ржП package.json рж░рж╛ржЦрзЛ тЖТ Node ржмрзБржЭрзЗ ржпрзЗ ржПржЯрж╛ ржПржХржЯрж┐ proper ржкрзНрж░ржЬрзЗржХрзНржЯред

package.json ржирж╛ ржерж╛ржХрж▓рзЗ:

dependency save рж╣ржмрзЗ ржирж╛

рж╕рзНржХрзНрж░рж┐ржкрзНржЯ ржХрж╛ржЬ ржХрж░ржмрзЗ ржирж╛

app shared ржХрж░рж╛ ржпрж╛ржмрзЗ ржирж╛

npm tools ржХрж╛ржЬ ржХрж░ржмрзЗ ржирж╛

ЁЯУМ ржмрж╛ржВрж▓рж╛рзЯ ржПржХ рж▓рж╛ржЗржирзЗ:

package.json рж╣рж▓рзЛ Node.js ржкрзНрж░ржЬрзЗржХрзНржЯрзЗрж░ рж╣рж╛рж░рзНржЯ тАФ dependency, version, scripts, рж╕ржмржХрж┐ржЫрзБ ржПржЯрж╛рждрзЗ ржерж╛ржХрзЗред
ржПржЗ ржлрж╛ржЗрж▓ ржмрж╛ржирж╛ржирзЛрж░ ржЬржирзНржпржЗ npm init ржкрзНрж░рзЯрзЛржЬржиред

# why use -D flag

TypeScript рж╢рзБржзрзБ development-ржПрж░ рж╕ржорзЯ рж▓рж╛ржЧрзЗ, production ржП рж▓рж╛ржЧрзЗ ржирж╛тАФ рждрж╛ржЗ -D ржжрж┐рзЯрзЗ devDependency рж╣рж┐рж╕рзЗржмрзЗ ржЗржирж╕рзНржЯрж▓ ржХрж░рж╛ рж╣рзЯред

# express.json()

express.json() рж╣рж▓рзЛ Express.js ржПрж░ ржПржХржЯрж╛ built-in middleware ржпрж╛ HTTP рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯрзЗрж░ JSON ржлрж░ржорзНржпрж╛ржЯрзЗрж░ ржмржбрж┐ (body) ржХрзЗ ржкрж╛рж░рзНрж╕ ржХрж░рзЗ ржПржмржВ рж╕рзЗржЯрж╛ржХрзЗ req.body ржПрж░ ржоржзрзНржпрзЗ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ ржХрж░рж╛рж░ ржпрзЛржЧрзНржп ржХрж░рзЗ рждрзЛрж▓рзЗред

рж╕рж╣ржЬ ржмрж╛ржВрж▓рж╛рзЯ:

ржпржЦржи рждрзЛржорж╛рж░ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ (ржпрзЗржоржи ржмрзНрж░рж╛ржЙржЬрж╛рж░ ржмрж╛ Postman) ржерзЗржХрзЗ рж╕рж╛рж░рзНржнрж╛рж░рзЗ JSON ржбрж╛ржЯрж╛ ржкрж╛ржарж╛ржирзЛ рж╣рзЯ (рж╕рж╛ржзрж╛рж░ржгржд POST, PUT ржмрж╛ PATCH рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯрзЗ), рждржЦржи рж╕рзЗржЯрж╛ ржЖрж╕рж▓рзЗ string ржЖржХрж╛рж░рзЗ ржерж╛ржХрзЗред

express.json() рж╕рзЗржЗ string ржХрзЗ JavaScript object ржП рж░рзВржкрж╛ржирзНрждрж░ ржХрж░рзЗ ржжрзЗрзЯ ржпрж╛рждрзЗ рждрзЛржорж╛рж░ ржХрзЛржбрзЗ рж╕рж╣ржЬрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЛред

ржХрзЗржи ржжрж░ржХрж╛рж░?

HTTP рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯрзЗрж░ ржмржбрж┐ ржЖрж╕рж▓рзЗ text/string рж╣рж┐рж╕рзЗржмрзЗ ржЖрж╕рзЗ

ржХрж┐ржирзНрждрзБ рждрзБржорж┐ ржЪрж╛ржЗрж▓рзЗ ржмржбрж┐рж░ ржоржзрзНржпрзЗ ржерж╛ржХрж╛ JSON ржбрж╛ржЯрж╛ржХрзЗ object рж╣рж┐рж╕рзЗржмрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗ

рждрж╛ржЗ express.json() middleware ржЯрж╛ рждрзЛржорж╛рж░ ржПржЗ ржХрж╛ржЬржЯрж╛ ржХрж░рзЗ ржжрзЗрзЯ рж╕рзНржмрзЯржВржХрзНрж░рж┐рзЯржнрж╛ржмрзЗ

# database pool

Database Pool ржмрж╛ Connection Pool ржХрзА?

ржбрж╛ржЯрж╛ржмрзЗрж╕ ржкрзБрж▓ рж╣рж▓рзЛ ржПржХржЯрж┐ ржХрзНрж▓рж╛рж╕ ржмрж╛ рж╕рж╛рж░рзНржнрж┐рж╕ ржпрж╛ ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзЛржЧ (connection) ржЧрзБрж▓рзЛ рждрзИрж░рж┐ ржХрж░рзЗ ржПржХржжржо ржЖржЧрзЗ ржерзЗржХрзЗржЗ ржкрзНрж░рж╕рзНрждрзБржд рж░рж╛ржЦрзЗред

ржПржЦржи ржпржЦржи рждрзЛржорж╛рж░ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗ ржХрзЛржирзЛ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржкрж╛ржарж╛ржмрзЗ, рждржЦржи ржбрж╛ржЯрж╛ржмрзЗрж╕ ржкрзБрж▓ ржерзЗржХрзЗ ржПржХржЯрж┐ ржЖржЧрзЗржЗ рждрзИрж░рж┐ ржХрж░рж╛ ржХрж╛ржирзЗржХрж╢ржи ржирзЗржУрзЯрж╛ рж╣рзЯ, ржХрж╛ржЬ рж╢рзЗрж╖ рж╣рж▓рзЗ рж╕рзЗржЯрж╛ ржЖржмрж╛рж░ ржкрзБрж▓рзЗ рж░рзЗржЦрзЗ ржжрзЗржУрзЯрж╛ рж╣рзЯред

ржХрзЗржи ржкрзНрж░рзЯрзЛржЬржи?

ржкрзНрж░рждрж┐ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯрзЗ ржирждрзБржи ржХрж╛ржирзЗржХрж╢ржи рждрзИрж░рж┐ ржХрж░рж▓рзЗ рж╕ржорзЯ ржПржмржВ рж░рж┐рж╕рзЛрж░рзНрж╕ ржмрзЗрж╢рж┐ рж▓рж╛ржЧрзЗред

ржбрж╛ржЯрж╛ржмрзЗрж╕ ржХрж╛ржирзЗржХрж╢ржи рждрзИрж░рж┐рждрзЗ ржХрж┐ржЫрзБ рж╕ржорзЯ рж▓рж╛ржЧрзЗ (ржпрж╛ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржиржХрзЗ ржзрзАрж░ ржХрж░рзЗ ржжрзЗрзЯ)ред

ржПржХрж╛ржзрж┐ржХ ржХрж╛ржирзЗржХрж╢ржи рждрзИрж░рж┐ ржХрж░рж▓рзЗ рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржЪрж╛ржк ржкрзЬрзЗ, ржХрж┐ржирзНрждрзБ ржПржХржЗ рж╕ржорзЯ ржЕржирзЗржХ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржерж╛ржХрзЗред

рждрж╛ржЗ ржкрзВрж░рзНржмрзЗржЗ ржХрж┐ржЫрзБ ржХрж╛ржирзЗржХрж╢ржи рждрзИрж░рж┐ рж░рзЗржЦрзЗ, ржмрж╛рж░ржмрж╛рж░ ржирждрзБржи ржХрж░рзЗ ржХрж╛ржирзЗржХрж╢ржи рждрзИрж░рж┐ ржирж╛ ржХрж░рзЗ, ржкрзВрж░рзНржмрзЗ рждрзИрж░рж┐ ржХрж╛ржирзЗржХрж╢ржи рж░рж┐ржЗржЙржЬ ржХрж░рж╛рж░ ржЬржирзНржп ржбрж╛ржЯрж╛ржмрзЗрж╕ ржкрзБрж▓ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯред

ржХрж┐ржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ?

ржкрзНрж░ржержорзЗ, ржбрж╛ржЯрж╛ржмрзЗрж╕ ржкрзБрж▓ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕ржВржЦрзНржпржХ ржХрж╛ржирзЗржХрж╢ржи рждрзИрж░рж┐ ржХрж░рзЗ рж░рж╛ржЦрзЗ (ржзрж░рж╛ ржпрж╛ржХ 10ржЯрж╛)ред

ржпржЦржи ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи ржерзЗржХрзЗ ржХрзЛржирзЛ ржбрж╛ржЯрж╛ржмрзЗрж╕ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржЖрж╕рзЗ, рждржЦржи ржкрзБрж▓ ржерзЗржХрзЗ ржПржХржЯрж┐ ржлрж╛ржБржХрж╛ ржХрж╛ржирзЗржХрж╢ржи ржирзЗрзЯрж╛ рж╣рзЯред

ржХрж╛ржЬ рж╢рзЗрж╖ рж╣рж▓рзЗ, ржУржЗ ржХрж╛ржирзЗржХрж╢ржи ржмржирзНржз ржирж╛ ржХрж░рзЗ ржкрзБрж▓рзЗ ржлрзЗрж░ржд ржжрзЗрзЯрж╛ рж╣рзЯред

ржкрж░ржмрж░рзНрждрзА рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯрзЗ ржЖржмрж╛рж░ ржПржХржЗ ржХрж╛ржирзЗржХрж╢ржи ржЗржЙржЬ ржХрж░рж╛ рж╣рзЯред

рж╕рзБржмрж┐ржзрж╛:

ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕ ржмрзГржжрзНржзрж┐: ржХрж╛ржирзЗржХрж╢ржи рждрзИрж░рж┐рж░ рж╕ржорзЯ ржХржорзЗ ржпрж╛рзЯред

рж░рж┐рж╕рзЛрж░рзНрж╕ ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛ ржнрж╛рж▓рзЛ рж╣рзЯ: ржПржХржЗ рж╕ржорзЯрзЗ рж╕рзАржорж┐ржд ржХрж╛ржирзЗржХрж╢ржи ржжрж┐рзЯрзЗ ржмрзЗрж╢рж┐ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ рж╕рж╛ржорж▓рж╛ржирзЛ ржпрж╛рзЯред

рж╕рзНржХрзЗрж▓рж┐ржВ рж╕рж╣ржЬ рж╣рзЯ: ржмрзЬ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи рж╕рж╣ржЬрзЗ ржорзНржпрж╛ржирзЗржЬ ржХрж░рж╛ ржпрж╛рзЯред

whenevr i will sent req.body to the busisness logc class i have to recice in function like that->>>payload:Record<string, any/unknown>

# Authentication and authorozation

ЁЯФР Authentication (ржЕржерзЗржиржЯрж┐ржХрзЗрж╢ржи) тАФ тАЬрждрзБржорж┐ ржХрзЗ?тАЭ

Authentication рж╣рж▓рзЛ ржХрж╛ржЙржХрзЗ ржкрж░рж┐ржЪрзЯ ржпрж╛ржЪрж╛ржЗ ржХрж░рж╛ред

ЁЯСЙ ржПржЯрж╛ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗ ржпрзЗ
рждрзБржорж┐ ржЖрж╕рж▓рзЗржЗ рж╕рзЗржЗ ржмрзНржпржХрзНрждрж┐ ржХрж┐ржирж╛, ржпрж╛ржХрзЗ рждрзБржорж┐ ржжрж╛ржмрж┐ ржХрж░ржЫрзЛред

ржжрзИржиржирзНржжрж┐ржи ржЙржжрж╛рж╣рж░ржг:

Facebook ржП рж▓ржЧржЗржи ржХрж░рж╛рж░ рж╕ржорзЯ ржЗржорзЗржЗрж▓ + ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб тЖТ Authentication

ржлрзЛржи ржЖржирж▓ржХ ржХрж░рждрзЗ PIN/Pattern тЖТ Authentication

Gmail ржП OTP ржжрзЗржУрзЯрж╛ тЖТ Authentication

ржЯрзЗржХ ржмрж┐рж╢рзНржмрзЗрж░ ржЙржжрж╛рж╣рж░ржг:

JWT token рждрзИрж░рж┐ ржХрж░рж╛

Password check ржХрж░рж╛

Login system

ЁЯУМ Authentication рж╢рзБржзрзБржорж╛рждрзНрж░ ржкрж░рж┐ржЪрзЯ ржпрж╛ржЪрж╛ржЗ ржХрж░рзЗ тАФ ржПрж░ ржмрзЗрж╢рж┐ ржХрж┐ржЫрзБ ржирж╛ред

ЁЯЫВ Authorization (ржЕржерзЛрж░рж╛ржЗржЬрзЗрж╢ржи) тАФ тАЬрждрзБржорж┐ ржХрзА ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ?тАЭ

Authorization рж╣рж▓рзЛ
ржХрзЛржирзЛ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ржХрзА ржХрзА ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ, ржХрзЛржи рж░рж┐рж╕рзЛрж░рзНрж╕рзЗ ржПржХрзНрж╕рзЗрж╕ ржЖржЫрзЗ, рж╕рзЗржЯрж╛ ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рж╛ред

ЁЯСЙ ржорж╛ржирзЗ:
Permission check ржХрж░рж╛ред

ржжрзИржиржирзНржжрж┐ржи ржЙржжрж╛рж╣рж░ржг:

Student account тЖТ рж╢рзБржзрзБ ржирж┐ржЬрзЗрж░ result ржжрзЗржЦрждрзЗ ржкрж╛рж░ржмрзЗ

Admin account тЖТ рж╕ржм student-ржПрж░ ржбрзЗржЯрж╛ ржжрзЗржЦрждрзЗ ржкрж╛рж░ржмрзЗ

YouTube Viewer тЖТ ржнрж┐ржбрж┐ржУ ржжрзЗржЦрждрзЗ ржкрж╛рж░рзЗ

YouTube Creator тЖТ ржнрж┐ржбрж┐ржУ ржЖржкрж▓рзЛржб ржХрж░рждрзЗ ржкрж╛рж░рзЗ

YouTube Admin тЖТ рж╕ржмржХрж┐ржЫрзБ manage ржХрж░рждрзЗ ржкрж╛рж░рзЗ

ржЯрзЗржХ ржЙржжрж╛рж╣рж░ржг:

Admin ржХрж┐ /users delete ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ?

User ржХрж┐ /admin ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб ржжрзЗржЦрждрзЗ ржкрж╛рж░ржмрзЗ?

Token ржП ржерж╛ржХрж╛ role verify ржХрж░рж╛

ЁЯУМ Authorization permissions ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рзЗ тАФ ржХрж╛рж░ ржХрж┐ ржЕржирзБржорждрж┐ ржЖржЫрзЗред

| ржмрж┐рж╖рзЯ      | Authentication | Authorization         |
| --------- | -------------- | --------------------- |
| ржкрзНрж░рж╢рзНржи    | рждрзБржорж┐ ржХрзЗ?       | рждрзБржорж┐ ржХрзА ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ?   |
| ржХрж╛ржЬ       | ржкрж░рж┐ржЪрзЯ ржпрж╛ржЪрж╛ржЗ    | ржЕржирзБржорждрж┐ ржпрж╛ржЪрж╛ржЗ          |
| ржЙржжрж╛рж╣рж░ржг    | рж▓ржЧржЗржи ржХрж░рж╛       | Admin panel access    |
| ржЖржЧрзЗ / ржкрж░рзЗ | ржЖржЧрзЗ ржХрж░рж╛ рж╣рзЯ     | ржкрж░рзЗ ржХрж░рж╛ рж╣рзЯ            |
| output    | token/session  | permission allow/deny |

ЁЯОп рзи рж▓рж╛ржЗржирзЗрж░ Shortcut (ржоржирзЗ рж░рж╛ржЦрж╛рж░ ржорждрзЛ):

Authentication = рж▓ржЧржЗржи/ржкрж░рж┐ржЪрзЯ ржпрж╛ржЪрж╛ржЗ

Authorization = ржкрж╛рж░ржорж┐рж╢ржи/ржЕржирзБржорждрж┐ ржпрж╛ржЪрж╛ржЗ

# bycrypt

ЁЯФР bcrypt ржХрзА?

bcrypt рж╣рж▓рзЛ ржПржХржЯрж┐ password hashing algorithm
ржпрж╛ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАрж░ ржкрж╛рж╕ржУрзЯрж╛рж░рзНржбржХрзЗ ржирж┐рж░рж╛ржкржжржнрж╛ржмрзЗ рж╣рзНржпрж╛рж╢ (Hash) ржХрж░рзЗ рж░рж╛ржЦрзЗред

ЁЯзВ Hash ржорж╛ржирзЗ ржХрзА?

Hash ржорж╛ржирзЗ рж╣рж▓рзЛ:

ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб тЖТ ржПржХржжржо ржнрж┐ржирзНржи, ржЕржкрж░рж┐ржмрж░рзНрждржирзАрзЯ ржПржХржЯрж┐ рж╕рзНржЯрзНрж░рж┐ржВ рждрзИрж░рзА ржХрж░рж╛ред
ржПржЗ рж╕рзНржЯрзНрж░рж┐ржВ ржерзЗржХрзЗ ржЖрж╕рж▓ ржкрж╛рж╕ржУрзЯрж╛рж░рзНржбрзЗ ржлрж┐рж░рзЗ ржпрж╛ржУрзЯрж╛ ржпрж╛рзЯ ржирж╛ред

ржЙржжрж╛рж╣рж░ржг:

"secret123" тЖТ "sdfj234n23k4j2h34kj234h23"

ЁЯФТ bcrypt ржХрзЗржи important?

ржХрж╛рж░ржг:

1я╕ПтГг Password ржХржЦржирзЛржЗ database ржП plain text рж░рж╛ржЦрж╛ ржпрж╛ржмрзЗ ржирж╛

ржпржжрж┐ database leak рж╣рзЯ, рзлрзж,рзжрзжрзж user ржПрж░ ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб рж╕ржмрж╛ржЗ ржжрж┐рзЯрзЗ ржжрзЗржмрзЗред
bcrypt ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ, ржЪрзБрж░рж┐ рж╣рж▓рзЗржУ рж╣рзНржпрж╛ржХрж╛рж░ ржЖрж╕рж▓ ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб ржЬрж╛ржирждрзЗ ржкрж╛рж░ржмрзЗ ржирж╛ред

2я╕ПтГг bcrypt ржЦрзБржмржЗ slowтАУhashing algorithm

Slow hashing ржорж╛ржирзЗ brute force ржжрж┐рзЯрзЗ guess ржХрж░рж╛ ржХржарж┐ржиред

3я╕ПтГг bcrypt тАЬsaltтАЭ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ

Salt = рж╣рзНржпрж╛рж╢ ржХрж░рж╛рж░ ржЖржЧрзЗ password ржПрж░ рж╕рж╛ржерзЗ extra random data ржпрзЛржЧ ржХрж░рж╛ред
ржПрж░ ржлрж▓рзЗ ржжрзБржЗржЬржи user ржПржХржЗ password ржжрж┐рж▓рзЗржУ hash ржЖрж▓рж╛ржжрж╛ рж╣ржмрзЗред

ЁЯзВ Salt ржХрзА? (рж╕рж╣ржЬ ржнрж╛рж╖рж╛рзЯ)

ржнрж╛ржмрзЛ ржжрзБржЬржирзЗрж░ ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб:

User-1 тЖТ 123456

User-2 тЖТ 123456

bcrypt ржП ржпржЦржи рж╣рзНржпрж╛рж╢ ржХрж░ржмрзЗ:

User-1 ржПрж░ hash тЖТ abcd9293sdf9...
User-2 ржПрж░ hash тЖТ 88dfjsd88f9s...

ржПржХржЗ ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб тЖТ ржнрж┐ржирзНржи hash, ржХрж╛рж░ржг bcrypt ржнрж┐рждрж░рзЗ salt ржпрзЛржЧ ржХрж░ржЫрзЗред

ЁЯзо bcrypt ржХрж┐ ржХрж░рзЗ?

bcrypt рзиржЯрж┐ ржмрзЬ ржХрж╛ржЬ ржХрж░рзЗ:

тЬФ 1. ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб hash ржХрж░рж╛ (store ржХрж░рж╛рж░ ржЬржирзНржп)
const hashed = await bcrypt.hash(password, 10);

тЬФ 2. рж▓ржЧржЗржи рж╕ржорзЯ hash verify ржХрж░рж╛
const isMatch = await bcrypt.compare(password, hashedPassword);

ЁЯФС bcrypt.hash() ржП 10 ржорж╛ржирзЗ ржХрзА?

ржПржЯрж╛ salt rounds тАФ ржХрзЯржмрж╛рж░ hashing ржХрж░рж╛ рж╣ржмрзЗред
Round ржпржд ржмрзЗрж╢рж┐, hashing рждржд slow тЖТ рж╣рзНржпрж╛ржХрж╛рж░ржжрзЗрж░ guess ржХрж░рж╛ ржХржарж┐ржиред

ЁЯФе Short Explanation (ржПржХ рж▓рж╛ржЗржирзЗ)
тЬФ bcrypt ржкрж╛рж╕ржУрзЯрж╛рж░рзНржбржХрзЗ ржирж┐рж░рж╛ржкржж рж╕рзНржЯрзНрж░рж┐ржВрзЯрзЗ ржкрж░рж┐ржгржд ржХрж░рзЗ (hash + salt ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ)
тЬФ database leak рж╣рж▓рзЗржУ ржЖрж╕рж▓ ржкрж╛рж╕ржУрзЯрж╛рж░рзНржб ржЬрж╛ржирж╛ ржпрж╛рзЯ ржирж╛

npm install -D @types/bcrypt

# jwt

тЬЕ jsonwebtoken / JWT ржХрзЗржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯ?

JWT (JSON Web Token) рж╣рж▓рзЛ authentication + authorization ржПрж░ ржЬржирзНржп рж╕ржмржЪрзЗрзЯрзЗ ржЬржиржкрзНрж░рж┐рзЯ рж╕рж┐рж╕рзНржЯрзЗржоред

ржПржЯрж╛ ржорзВрж▓ржд ржмрзНржпржмрж╣рж╛рж░ рж╣рзЯ тАФ

1я╕ПтГг User ржХрзЗ рж▓ржЧржЗржи ржХрж░рж╛ржирзЛрж░ ржкрж░рзЗ рждрж╛рж░ ржкрж░рж┐ржЪрзЯ ржкрзНрж░ржорж╛ржг ржХрж░рждрзЗ (Authentication)

User рж▓ржЧржЗржи ржХрж░рж▓рзЗ:

Server рждрж╛рж░ password check ржХрж░рзЗ

рждрж╛рж░ржкрж░ Server user-ржПрж░ ржЬржирзНржп ржПржХржЯрж┐ Token рждрзИрж░рж┐ ржХрж░рзЗ

ржУржЗ Token user-ржХрзЗ ржкрж╛ржарж┐рзЯрзЗ ржжрзЗрзЯ

ржПржЗ Token-ржЯрж╛ржЗ ржкрзНрж░ржорж╛ржг: "User ржарж┐ржХ ржЖржЫрзЗ, logged in ржЖржЫрзЗ"

2я╕ПтГг ржкрзНрж░рждрж┐ржмрж╛рж░ рж▓ржЧржЗржи ржХрж░рждрзЗ ржирж╛ рж╣рзЯ тАФ рждрж╛ржЗ

JWT token browser/localStorage/cookie-рждрзЗ рж░рж╛ржЦрж╛ ржпрж╛рзЯред

рждрж╛рж░ржкрж░ user ржпржЦржи ржЖржмрж╛рж░ request ржкрж╛ржарж╛ржмрзЗ, рж╕рзЗ token ржкрж╛ржарж┐рзЯрзЗ ржжрзЗржмрзЗред

Server token verify ржХрж░рзЗ ржмрж▓ржмрзЗ:
ЁЯСЙ тАЬрж╣рзНржпрж╛ржБ, ржПржЗ user authenticредтАЭ

3я╕ПтГг Stateless authentication тАФ Server ржХрзЛржирзЛ session рж░рж╛ржЦрзЗ ржирж╛

Session system-ржП Server user list ржзрж░рзЗ рж░рж╛ржЦрзЗред
JWT-рждрзЗ server ржХрж┐ржЫрзБржЗ ржзрж░рзЗ рж░рж╛ржЦрзЗ ржирж╛ред
Token-ржЯрж┐рждрзЗржЗ user-ржПрж░ info encoded ржерж╛ржХрзЗред

ржЕрж░рзНржерж╛рзО:

тЬФ Faster
тЬФ Scalable
тЬФ Stateless
тЬФ Microservices friendly

npm install jsonwebtoken
npm install -D @types/jsonwebtoken

ржПржЗ JWT ржЯрзЛржХрзЗржиржЯрж╛ржХрзЗ ржЖржорж░рж╛ рзй ржнрж╛ржЧрзЗ ржнрж╛ржЧ ржХрж░рзЗ ржмрзНржпрж╛ржЦрзНржпрж╛ ржХрж░ржмрзЛред JWT рж╕рж░рзНржмржжрж╛ рждрж┐ржи ржнрж╛ржЧрзЗ ржерж╛ржХрзЗ:

HEADER.PAYLOAD.SIGNATURE

ржЖржкржирж╛рж░ ржЯрзЛржХрзЗржи:

eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9
.
eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWUsImlhdCI6MTUxNjIzOTAyMn0
.
KMUFsIDTnFmyG3nMiGM6H9FNFUROf3wh7SmqJp-QV30

тЬЕ 1я╕ПтГг HEADER (ржПржиржХрзЛржб ржХрж░рж╛ JSON):
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9

Decode ржХрж░рж▓рзЗ JSON data ржПржоржи рж╣ржмрзЗ:

{
"alg": "HS256",
"typ": "JWT"
}

ЁЯСЙ ржмрзНржпрж╛ржЦрзНржпрж╛:

alg тЖТ ржХрзЛржи algorithm ржжрж┐рзЯрзЗ signature ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ
ржПржЦрж╛ржирзЗ "HS256" = HMAC SHA-256

typ тЖТ ржЯрзЛржХрзЗржирзЗрж░ ржЯрж╛ржЗржк = "JWT"

тЮбя╕П ржПржЗ ржЕржВрж╢ browser/server ржХрзЗ ржмрж▓рзЗ ржжрзЗрзЯ JWT ржХрж┐ржнрж╛ржмрзЗ verify рж╣ржмрзЗред

тЬЕ 2я╕ПтГг PAYLOAD (User data / Claims):
eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWUsImlhdCI6MTUxNjIzOTAyMn0

Decode ржХрж░рж▓рзЗ JSON:

{
"sub": "1234567890",
"name": "John Doe",
"admin": true,
"iat": 1516239022
}

ржПржЧрзБрж▓рзЛржХрзЗ ржмрж▓рж╛ рж╣рзЯ claims (user-ржПрж░ рждржерзНржп)ред

ЁЯСЙ ржмрзНржпрж╛ржЦрзНржпрж╛:

sub = subject (usually user ID)

name = user name

admin = true (user admin ржХрж┐ржирж╛)

iat = issued at (token ржХржмрзЗ рждрзИрж░рж┐ рж╣рзЯрзЗржЫрзЗ, UNIX timestamp)

тЮбя╕П ржПржЗ ржЕржВрж╢рзЗ user-ржПрж░ рждржерзНржп ржерж╛ржХрзЗ (but sensitive data ржирзЯ)
тЮбя╕П ржПржЗ ржЕржВрж╢ encoded ржХрж┐ржирзНрждрзБ encrypted ржирж╛, рждрж╛ржЗ ржпрзЗ ржХрзЗржЙ decode ржХрж░рждрзЗ ржкрж╛рж░рзЗред

тЬЕ 3я╕ПтГг SIGNATURE (verify ржХрж░рж╛рж░ ржЬржирзНржп):
KMUFsIDTnFmyG3nMiGM6H9FNFUROf3wh7SmqJp-QV30

ЁЯСЙ ржмрзНржпрж╛ржЦрзНржпрж╛:

Signature рждрзИрж░рж┐ рж╣рзЯ:

HMACSHA256(
base64UrlEncode(header) + "." + base64UrlEncode(payload),
SECRET_KEY
)

ржПржЯрж╛ token ржХрзЗ protect ржХрж░рзЗред

Purpose:

ржХрзЗржЙ ржЯрзЛржХрзЗржи ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рж▓рзЗ signature match рж╣ржмрзЗ ржирж╛ тЖТ token invalid

Server secret key ржжрж┐рзЯрзЗ signature verify ржХрж░рзЗ

тЮбя╕П ржПржЗ ржЕржВрж╢ decode ржХрж░рж╛ ржпрж╛рзЯ ржирж╛ (ржПржЯрж╛ hashing)ред

ЁЯФе ржорзЛржЯ ржХржерж╛:
ржЕржВрж╢ ржХрж╛ржЬ
Header: ржХрзЛржи algorithm, ржХрзЛржи ржзрж░ржирзЗрж░ token
Payload: :user info, claims
Signature: token valid ржХрж┐ржирж╛ check ржХрж░рзЗ

work flow:
![alt text](<src/WhatsApp Image 2025-12-03 at 5.09.39 PM.jpeg>)
